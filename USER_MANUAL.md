# TCG Manager - User Manual

Welcome to **TCG Manager**, the web application for managing Pokémon TCG tournaments. This system serves as a visibility layer for your tournaments, using your uploaded TOM (`.tdf`) files as the authoritative source for all match data.

## 1. Getting Started (All Users)

### Sign Up / Login
To access TCG Manager, you must log in using your Google account.
1.  Click the **"Sign In with Google"** button on the homepage.
2.  Follow the prompts to authenticate your account.

### Profile Setup (Critical)
After logging in, you **MUST** configure your profile to ensure you can claim ownership of your tournaments.

1.  Navigate to the **Settings** page (found in the user menu or at `/settings`).
2.  **Display Name**: Enter the name you want visible to others.
3.  **Pokémon Player ID (PID)**: Enter your official Pokémon Player ID.

[Image: Profile Settings Screen - showcasing Display Name and PID fields]

    *   > [!IMPORTANT]
    *   > The system uses this PID to link uploaded tournaments to you. If the PID in the uploaded `.tdf` file matches the PID in your profile, you will automatically be assigned as the **Owner** of that tournament.

## 2. For Organizers (Managing Events)

### Uploading a Tournament
1.  Navigate to the dashboard or **Organiser TOM Upload** section.
2.  Click the **"Upload TDF"** button.
3.  Select your `.tdf` file generated by the TOM software.

[Image: Organiser Upload Screen with "Upload TDF" button]

> [!WARNING]
> **Source of Truth Logic**: The `.tdf` file is the **Source of Truth**.
> *   Match results, pairings, and round timers come *strictly* from this XML file.
> *   **You cannot edit scores manually in the web app.**
> *   To update results, you must enter them in the TOM software and **re-upload** the file. The web view will update automatically.

### Claiming Ownership
When a file is uploaded, the system reads the `<organizer popid="...">` tag from the XML.
*   If this ID matches your **Profile PID**, the tournament is automatically linked to your account.
*   If you do not see your tournament, ensure your **Profile PID** implies the correct ID used in TOM.

### The "Manage" Dashboard
Once you own a tournament, you can access the Management Dashboard.
1.  Go to the **Tournament Detail** page of your event.
2.  Click the **Gear Icon / Manage** button in the header.

[Image: Tournament Header showing the Manage Button]

From here, you can perform the following actions:

#### Staff / Judge Management
You can assign other users as Judges for your event.
1.  In the "Manage" view, look for the **Staff / Judges** section.
2.  Search for a user by **Name** or **PID**.
3.  Click **Add** to assign them as a Judge.

[Image: Staff Management Interface]

#### Publishing a Tournament
Tournaments have two visibility states:
*   **Hidden** (Default): Visible only to You (the Organizer) and assigned Judges. Use this while setting up or if the event is private.
*   **Published**: Visible to all public users and players on the main listing.

Toggle this setting in the Management Dashboard to make your event live.

## 3. For Players & Public

### Viewing Tournaments
Navigate to the home page to see a list of events.
*   **Live**: Events currently in progress.
*   **Completed**: Events that have finished.

### Standings
For **Completed** events, a **"Standings"** tab will appear on the tournament detail page.
*   This view breaks down results by **Rank**, **Division** (Junior / Senior / Master), and **W-L-T** records.

[Image: Standings Tab View]

### Pairings
To find your match:
1.  Click on a **Live** tournament.
2.  Look for your username in the pairings list.
3.  Note your **Table Number** and **Opponent**.

[Image: Pairings List with Table Numbers]

## 4. For Judges

### Access
You will have access to any tournament where you are listed as a Judge.
*   This includes **Hidden** tournaments (up to 15 days prior to the event start).
*   You can view these events in your dashboard or via the direct link.

### Responsibilities
*   **Validation**: Your primary role is to validate match results against the actual gameplay.
*   **Read-Only**: Remember that the web interface is read-only. If a result needs to be corrected, inform the Organizer to update it in TOM and re-upload the file.

## 5. For Admins

### Global Access
Admins have unrestricted access to the system via the **Admin Dashboard**.
*   **View / Edit / Delete**: Admins can manage **ANY** tournament on the platform, regardless of ownership.

### User Management
Admins can manage user roles and permissions directly if manual intervention is required for account issues.

---

## Troubleshooting / FAQ

**Q: Why can't I edit the score directly on the website?**
**A:** The website is a viewer. The TOM file (`.tdf`) is the source of truth. Please update the result in TOM and re-upload the file.

**Q: I uploaded a tournament but I don't see the "Manage" button.**
**A:** Check your **Settings** page. Your **Pokémon Player ID (PID)** must match the Organizer PID inside the `.tdf` file. If they don't match, the system doesn't know you own the file.

**Q: My tournament is uploaded but nobody else can see it.**
**A:** Check if your tournament is set to **"Published"**. Defaults are often set to **Hidden** to prevent accidental leaks before you are ready.

**Q: How do I become a Judge?**
**A:** You must be added by the Tournament Organizer via their Management Dashboard. Provide them with your **Player ID** or **Display Name** so they can find you.
